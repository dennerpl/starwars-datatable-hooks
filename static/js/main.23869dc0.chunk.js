(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{10:function(e,t,a){e.exports=a(17)},15:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),u=a.n(l),c=(a(15),a(6)),o=a.n(c),i=a(9),m=a(3),s=a(5),d=a(1),f=Object(n.createContext)(),p=function(){return fetch("https://swapi-trybe.herokuapp.com/api/planets/?format=json").then((function(e){return e.json().then((function(t){return e.ok?Promise.resolve(t):Promise.reject(t)}))}))};var b=function(e){var t=Object(n.useState)([{teste:"s\xf3 testando"}]),a=Object(d.a)(t,2),l=a[0],u=a[1],c=Object(n.useState)(""),b=Object(d.a)(c,2),E=b[0],h=b[1],v=Object(n.useState)("population"),j=Object(d.a)(v,2),C=j[0],O=j[1],g=Object(n.useState)("maior que"),x=Object(d.a)(g,2),y=x[0],k=x[1],w=Object(n.useState)(0),V=Object(d.a)(w,2),F=V[0],I=V[1],N=Object(n.useState)([]),_=Object(d.a)(N,2),q=_[0],B=_[1],S=Object(n.useState)({filterByName:{name:""},filterByNumericValues:[{column:C,comparison:y,value:F}]}),P=Object(d.a)(S,2),T=P[0],D=P[1];Object(n.useEffect)((function(){p().then((function(e){return u(e.results)}))}),[]),Object(n.useEffect)((function(){B(l)}),[l]);var J=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,n=a.value,console.log(n),e.next=5,O(n);case 5:console.log(C);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){D({filterByNumericValues:[{column:C,comparison:y,value:F}]})}),[C,y,F]);var L={data:l,filters:T,textInputValue:E,filteredData:q,columnValue:C,comparisonValue:y,numberValue:F,handleColumnChange:J,handleComparisonChange:function(e){var t=e.target.value;k(t)},handleNumberChange:function(e){var t=e.target.value;I(t)},handleFilterClick:function(){D(Object(m.a)(Object(m.a)({},T),{},{filterByNumericValues:[{column:C,comparison:y,value:F}]})),function(){var e=Object(s.a)(l),t=T.filterByNumericValues[0],a=t.column,n=t.comparison,r=t.value,u=[];switch(n){case"maior que":u=e.filter((function(e){return parseInt(e[a],10)>parseInt(r,10)}));break;case"menor que":u=e.filter((function(e){return parseInt(e[a],10)<parseInt(r,10)}));break;default:u=e.filter((function(e){return parseInt(e[a],10)===parseInt(r,10)}))}B(u)}()},handleTextChange:function(e){var t=e.target.value;h(t),D(Object(m.a)(Object(m.a)({},T),{},{filterByName:{name:t}})),function(e){var t=Object(s.a)(l).filter((function(t){return t.name.toLowerCase().includes(e)}));B(t)}(t.toLowerCase())},handleResetClick:function(){var e=Object(s.a)(l);O("population"),k("maior que"),I(0),B(e)}},R=e.children;return r.a.createElement(f.Provider,{value:L},R)};var E=function(){var e=Object(n.useContext)(f).data,t=Object.keys(e[0]);return r.a.createElement("thead",null,r.a.createElement("tr",null,t.filter((function(e){return"residents"!==e})).map((function(e){return r.a.createElement("th",{key:e},e)}))))};var h=function(){var e=Object(n.useContext)(f).filteredData;return r.a.createElement("tbody",null,e.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.rotation_period),r.a.createElement("td",null,e.orbital_period),r.a.createElement("td",null,e.diameter),r.a.createElement("td",null,e.climate),r.a.createElement("td",null,e.gravity),r.a.createElement("td",null,e.terrain),r.a.createElement("td",null,e.surface_water),r.a.createElement("td",null,e.population),r.a.createElement("td",null,e.films),r.a.createElement("td",null,e.created),r.a.createElement("td",null,e.edited),r.a.createElement("td",null,e.url))})))};var v=function(){return r.a.createElement("table",{border:"1"},r.a.createElement(E,null),r.a.createElement(h,null))};var j=function(){var e=Object(n.useContext)(f),t=e.handleTextChange,a=e.textInputValue,l=e.columnValue,u=e.comparisonValue,c=e.numberValue,o=e.handleColumnChange,i=e.handleComparisonChange,m=e.handleNumberChange,s=e.handleFilterClick,d=e.handleResetClick;return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"textFilter"},"Filter by text",r.a.createElement("input",{id:"textFilter",type:"text",placeholder:"Search something","data-testid":"name-filter",value:a,onChange:t})),r.a.createElement("label",{htmlFor:"select"},"Column",r.a.createElement("select",{id:"select","data-testid":"column-filter",value:l,onChange:o},r.a.createElement("option",{value:"population"},"population"),r.a.createElement("option",{value:"orbital_period"},"orbital_period"),r.a.createElement("option",{value:"diameter"},"diameter"),r.a.createElement("option",{value:"rotation_period"},"rotation_period"),r.a.createElement("option",{value:"surface_water"},"surface_water"))),r.a.createElement("label",{htmlFor:"select"},"Comparison filter",r.a.createElement("select",{id:"select","data-testid":"comparison-filter",value:u,onChange:i},r.a.createElement("option",{value:"maior que"},"maior que"),r.a.createElement("option",{value:"menor que"},"menor que"),r.a.createElement("option",{value:"igual a"},"igual a"))),r.a.createElement("label",{htmlFor:"numberFilter"},"Number",r.a.createElement("input",{id:"numberFilter",type:"number",placeholder:"Base number","data-testid":"value-filter",value:c,onChange:m})),r.a.createElement("button",{type:"button","data-testid":"button-filter",onClick:function(){return s()}},"Teste"),r.a.createElement("div",{"data-testid":"filter"},r.a.createElement("button",{type:"button",onClick:function(){return d()}},"X")))};var C=function(){return r.a.createElement(b,null,r.a.createElement(j,null),r.a.createElement(v,null))};u.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.23869dc0.chunk.js.map